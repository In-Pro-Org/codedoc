<!DOCTYPE html><html><head><title>Codedoc</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/codedoc/docs/images/KostweinLogo.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/codedoc/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/codedoc/docs/assets/codedoc-bundle.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"></head><body><div class="header-0-0-6"><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><a class="github-button" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="false" data-show-count="true" data-size="false" href="https://github.com/In-Pro-Org/codedoc/">Star</a><br><br><a class="watermark-0-0-5" href="https://github.com/CONNECT-platform/codedoc" target="_blank">Created With<svg viewBox="0 0 536 296" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="codedoc" transform="translate(-244.000000, -364.000000)" fill-rule="nonzero"><path d="M580,532 C615.346224,532 644,560.653776 644,596 C644,631.346224 615.346224,660 580,660 C544.653776,660 516,631.346224 516,596 C516,560.653776 544.653776,532 580,532 Z M716,532 C751.346224,532 780,560.653776 780,596 C780,631.346224 751.346224,660 716,660 L692,660 C687.581722,660 684,656.418278 684,652 C684,647.581722 687.581722,644 692,644 L716,644 C742.509668,644 764,622.509668 764,596 C764,569.490332 742.509668,548 716,548 L692,548 C687.581722,548 684,544.418278 684,540 C684,535.581722 687.581722,532 692,532 L716,532 Z M468,532 C472.418278,532 476,535.581722 476,540 L476,652 C476,656.418278 472.418278,660 468,660 L444,660 C408.653776,660 380,631.346224 380,596 C380,560.653776 408.653776,532 444,532 L468,532 Z M332,532 C336.418278,532 340,535.581722 340,540 L340,652 C340,656.418278 336.418278,660 332,660 L252,660 C247.581722,660 244,656.418278 244,652 L244,540 C244,535.581722 247.581722,532 252,532 L332,532 Z M580,548 C553.490332,548 532,569.490332 532,596 C532,622.509668 553.490332,644 580,644 C606.509668,644 628,622.509668 628,596 C628,569.490332 606.509668,548 580,548 Z M461,548 L444,548 C417.490332,548 396,569.490332 396,596 C396,622.509668 417.490332,644 444,644 L461,644 L461,548 Z M444,364 C479.346224,364 508,392.653776 508,428 C508,463.346224 479.346224,492 444,492 C408.653776,492 380,463.346224 380,428 C380,392.653776 408.653776,364 444,364 Z M332,364 C336.418278,364 340,367.581722 340,372 C340,376.418278 336.418278,380 332,380 L308,380 C281.490332,380 260,401.490332 260,428 C260,454.509668 281.490332,476 308,476 L332,476 C336.418278,476 340,479.581722 340,484 C340,488.418278 336.418278,492 332,492 L308,492 C272.653776,492 244,463.346224 244,428 C244,392.653776 272.653776,364 308,364 L332,364 Z M580,364 C615.346224,364 644,392.653776 644,428 C644,463.346224 615.346224,492 580,492 L556,492 C551.581722,492 548,488.418278 548,484 L548,372 C548,367.581722 551.581722,364 556,364 L580,364 Z M772,364 C776.418278,364 780,367.581722 780,372 C780,376.418278 776.418278,380 772,380 L700,380 L700,420 L772,420 C776.418278,420 780,423.581722 780,428 C780,432.418278 776.418278,436 772,436 L700,436 L700,476 L772,476 C776.418278,476 780,479.581722 780,484 C780,488.418278 776.418278,492 772,492 L692,492 C687.581722,492 684,488.418278 684,484 L684,372 C684,367.581722 687.581722,364 692,364 L772,364 Z M444,380 C417.490332,380 396,401.490332 396,428 C396,454.509668 417.490332,476 444,476 C470.509668,476 492,454.509668 492,428 C492,401.490332 470.509668,380 444,380 Z M580,380 L563,380 L563,476 L580,476 C606.509668,476 628,454.509668 628,428 C628,401.490332 606.509668,380 580,380 Z"></path></g></svg></a></div><div id="-codedoc-container" class="container"><hr><p>created: 2024-08-01T11:39:24 (UTC +02:00)
tags: []
source: <a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html">https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html</a>
author: </p><hr><h1 id="guest-processing--veeam-backup--replication-best-practice-guide" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Guest processing | Veeam Backup &amp; Replication Best Practice Guide</h1><blockquote><h2 id="excerpt" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Excerpt</h2><p>Best practice from the field for Veeam Backup &amp; Replication</p></blockquote><hr><h2 id="application-aware-image-processingguest-processing" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#application-aware-image-processingguest-processing"></a>Application-aware image processing/guest processing</h2><p>When configuring backup and replication jobs, you can specify how to create the transactionally-consistent backup images of VMs. Two methods are available for bringing VM file system and applications into consistent state: VMware Tools/Hyper-V Integration Services quiescence or Veeamâ€™s proprietary application-aware image processing (using Microsoft VSS or Linux scripts).</p><p>Key features of both methods are illustrated by the following table:</p><table><thead><th>Feature</th><th>VMware tools quiescence</th><th>Hyper-V quiescence</th><th>application-aware image processing</th></thead><tbody><tr><td>Support for consistent backup on Windows guest</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>Sync driver for Linux guest</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td>Support for application-aware backup</td><td>Limited</td><td>Yes</td><td>Yes</td></tr><tr><td>Pre-VSS preparation for specific applications (e.g. Oracle)</td><td>No</td><td>No</td><td>Yes</td></tr><tr><td>Support for application log truncation (Microsoft SQL Server and Exchange Server)</td><td>No</td><td>No</td><td>Yes</td></tr><tr><td>Support for scripts</td><td>Yes (placed on VM guest)</td><td>Yes (placed on guest)</td><td>Yes (can be centrally distributed)</td></tr><tr><td>Error reporting</td><td>Within VM guest OS</td><td>Within VM guest OS</td><td>Centralized, on Veeam backup server</td></tr></tbody></table><h2 id="selecting-guest-processing-options" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#selecting-guest-processing-options"></a>Selecting guest processing options</h2><p>When on the <strong>guest processing</strong> step of the job wizard, you are presented with the variety of options (as described in detail in the User Guide for <a href="https://helpcenter.veeam.com/docs/backup/vsphere/backup_job_vss_vm.html">vSphere</a> and <a href="https://helpcenter.veeam.com/docs/backup/hyperv/backup_job_vss_hv.html">Hyper-V</a>).</p><p>Note that you can use pre- and post-job scripting to automate job global settings from the Veeam Backup &amp; Replication server itself. It is recommended to use the VM guest processing options for interaction with VMs.</p><p>To select the necessary options, refer to the table below.</p><table><thead><th>VM guest OS type</th><th>Linux with applications (without known user for Guest OS processing)</th><th>Windows with applications (without known user for Guest OS processing)</th><th>Windows with VSS-aware applications</th><th>Windows (no VSS-aware applications)</th><th>Linux with applications</th><th>Windows / Linux (no applications)</th></thead><tbody><tr><td>Guest OS processing is applicable</td><td>Y</td><td>Y</td><td>Y</td><td>Y</td><td>Y</td><td>N</td></tr><tr><td>Use Hypervisor quiescence</td><td>Y</td><td>Y</td><td>N</td><td>N</td><td>N</td><td>N</td></tr><tr><td>Enable Veeam Application-Aware Image Processing</td><td>N</td><td>N</td><td>Y</td><td>N</td><td>N</td><td>N</td></tr><tr><td>Enable Veeam Application-Aware Image Processing and InGuest Scripts</td><td>N</td><td>N</td><td>N</td><td>Y</td><td>Y</td><td>N</td></tr><tr><td>Disable Veeam Application-Aware Image Processing</td><td>Y</td><td>Y</td><td>N</td><td>N</td><td>N</td><td>Y</td></tr></tbody></table><p>For more details on the interaction check out <a href="https://bp.veeam.com/vbr/Support/S_Vmware/backup.html">Support - Guest Interaction</a>.</p><h2 id="guest-access-credentials" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#guest-access-credentials"></a>Guest Access Credentials</h2><p>Depending on the VM guest OS processing options selected (enabled or disabled application-aware image processing) and on the guest access method, you may need to supply access credentials for the guest OS, as described in the tables below.</p><h3 id="windows-os" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#windows-os"></a>Windows OS</h3><table><thead><th>Application-aware image processing (AAIP)</th><th>Hypervisor quiescence</th><th>Veeam via VIX/PSDirect</th><th>Veeam via RPC</th><th>Disabled (crash-consistent)</th></thead><tbody><tr><td>Membership in the local administrators group</td><td>User account not needed</td><td>No</td><td>Yes</td><td>User account not needed</td></tr><tr><td>Enter username as _\ Administrator_ <sup id="fnref:1"><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#fn:1">1</a></sup>(Local) or _\Administrator_</td><td>No</td><td>Yes<sup id="fnref:2"><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#fn:2">2</a></sup>(Only)</td><td>No</td><td>No</td></tr><tr><td>UAC can be enabled</td><td>Yes</td><td>Yes<sup id="fnref:3"><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#fn:3">3</a></sup>(When)</td><td>Yes</td><td>Yes</td></tr><tr><td>Guest tools must be installed and up to date</td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td></tr></tbody></table><h3 id="linux-os" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#linux-os"></a>Linux OS</h3><table><thead><th>Linux guest OS processing</th><th>Hypervisor quiescence</th><th>Veeam via SSH</th><th>Disabled (crash-consistent)</th></thead><tbody><tr><td>Root user account</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td>User requires <code>sudo</code> rights</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td>Certificate-based authentication available</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td>Guest tools must be installed and up to date</td><td>Yes</td><td>Yes</td><td>No</td></tr></tbody></table><h2 id="sizing" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#sizing"></a>Sizing</h2><p>Since guest processing produces very low impact on VM performance, no special considerations on sizing are required. If you use VSS processing with hypervisor quiescence or Veeam in-guest processing, you need free space on each drive of the VM for the software VSS snapshot. Please check Microsoft requirements for more information.</p><h2 id="file-exclusions" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#file-exclusions"></a>File exclusions</h2><p>Another operation Veeam Backup can do on guest OS level (NTFS only) is excluding certain files or folders from the backup. Alternatively, the job can be configured to include only specified files or folders in the backup. This functionality operates very similarly and shares a lot of characteristics with excluding Windows page file and deleted file blocks. It may help reduce size of the backup files or implement additional data protection strategies for specific data. Backups for which this option was enabled remain image-level and hypervisor APIs are used to retrieve VM data.</p><p>File exclusion feature uses a combination of NTFS MFT data and guest file system indexes collected by in-guest coordination process to determine which virtual disk blocks belong to the excluded files and thus should not be included in the backup.</p><p>Full file/folder paths, environment variables or file masks can be used to define exclusions. For more details on configuring exclusions and its limitations refer to the corresponding <a href="https://helpcenter.veeam.com/docs/backup/vsphere/guest_file_exclusion.html">User Guide section</a>.</p><p><strong>Note</strong>: Generic file exclusions (defined for high level folders) are most effective. File masks exclusions require guest file system indexes, and generating indexes may put additional stress on guest VM and will increase backup time. For this reason it is recommended to avoid using file system masks, especially on fileservers with large number (thousands) of small files and use high level folder exclusions instead. When using include filters, file exclusions are created for everything else and can take significant time.</p><hr><h2 id="references" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/4_Operations/O_Veeam_Jobs/O_backup_jobs/guest_processing.html#references"></a>References</h2><ul><li><a href="https://helpcenter.veeam.com/docs/backup/vsphere/backup_job_vss_vm.html">User Guide for vSphere - Guest Processing</a></li><li><a href="https://helpcenter.veeam.com/docs/backup/hyperv/backup_job_vss_hv.html">User Guide for Hyper-V - Guest Processing</a></li><li><a href="https://helpcenter.veeam.com/docs/backup/vsphere/guest_file_exclusion.html">User Guide - VM Guest OS Files</a></li></ul><hr><hr><div class="contentnav-0-0-11" data-no-search=""><a href="#guest-processing--veeam-backup--replication-best-practice-guide" class="h1" data-content-highlight="guest-processing--veeam-backup--replication-best-practice-guide">Guest processing | Veeam Backup &amp; Replication Best Practice Guide</a><a href="#excerpt" class="h2" data-content-highlight="excerpt">Excerpt</a><a href="#application-aware-image-processingguest-processing" class="h2" data-content-highlight="application-aware-image-processingguest-processing">Application-aware image processing/guest processing</a><a href="#selecting-guest-processing-options" class="h2" data-content-highlight="selecting-guest-processing-options">Selecting guest processing options</a><a href="#guest-access-credentials" class="h2" data-content-highlight="guest-access-credentials">Guest Access Credentials</a><a href="#windows-os" class="h3" data-content-highlight="windows-os">Windows OS</a><a href="#linux-os" class="h3" data-content-highlight="linux-os">Linux OS</a><a href="#sizing" class="h2" data-content-highlight="sizing">Sizing</a><a href="#file-exclusions" class="h2" data-content-highlight="file-exclusions">File exclusions</a><a href="#references" class="h2" data-content-highlight="references">References</a></div></div><div id="-codedoc-toc" class="toc-0-0-8"><div class="content-0-0-9"><div class="heading-0-0-3">Index</div><p><a href="/codedoc/">Home</a>
<a href="/codedoc/README">Index</a>
<a href="/codedoc/docs/Kostwein">Kostwein</a></p><div class="collapse-0-0-4 "><script id="XgbGtwWKPw">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("XgbGtwWKPw", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">PSModulesHelp</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/codedoc/docs/PSModulesHelp/ModuleDoku">PS Modules Help</a></p><hr></div></div><div class="collapse-0-0-4 "><script id="gkgdYvRbRb">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("gkgdYvRbRb", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">KnowledgeBase</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Knowledge/PowerShell/Index">PowerShell</a></p></blockquote></div></div><div class="collapse-0-0-4 "><script id="xbMHFKgSdc">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("xbMHFKgSdc", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Links</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Links/LinksWiki">Index</a></p></blockquote></div></div><div class="collapse-0-0-4 "><script id="CsLjvXIuYk">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("CsLjvXIuYk", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Veeam</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Knowledge/Veeam/Best%20Practices/index">Best Practices</a></p></blockquote></div></div><p><a href="/codedoc/docs/cheat-sheet">Markdown Cheat Sheet</a>
<a href="/codedoc/docs/code-features">Code Features</a></p><p><br><br></p><p>To add links to your other documents, simply
modify contents of <code>docs/md/_toc.md</code>.</p></div><div class="search-0-0-10"><script id="gUpoLdZHYg">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("gUpoLdZHYg", "EKtVWhWp+AfK3O64A4+bOg==", {"repo":"codedoc","user":"In-Pro-Org","root":"docs/md","pick":"\\.md$","drop":"(^_)|(\\/_)"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><div class="footer-0-0-7"><div class="left"><script id="QbjcSxpYtf">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("QbjcSxpYtf", "wCsMx1XMyC4jNi3FxvjU4g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div><div class="main"><div class="inside"><a href="https://github.com/In-Pro-Org/codedoc/" target="_blank">GitHub</a></div></div><div class="right"><script id="voJPtzUcvc">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("voJPtzUcvc", "6W59GcSTLBVXRr/Nl/rTkw==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><script id="HBuoQvXDCm">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("HBuoQvXDCm", "zKXJ5zf13oJGCwAAI3JIIA==", {"namespace":"/codedoc"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></body></html>
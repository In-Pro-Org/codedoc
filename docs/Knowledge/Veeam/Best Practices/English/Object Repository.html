<!DOCTYPE html><html><head><title>Codedoc</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/codedoc/docs/images/KostweinLogo.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/codedoc/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/codedoc/docs/assets/codedoc-bundle.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"></head><body><div class="header-0-0-6"><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><a class="github-button" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="false" data-show-count="true" data-size="false" href="https://github.com/In-Pro-Org/codedoc/">Star</a><br><br><a class="watermark-0-0-5" href="https://github.com/CONNECT-platform/codedoc" target="_blank">Created With<svg viewBox="0 0 536 296" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="codedoc" transform="translate(-244.000000, -364.000000)" fill-rule="nonzero"><path d="M580,532 C615.346224,532 644,560.653776 644,596 C644,631.346224 615.346224,660 580,660 C544.653776,660 516,631.346224 516,596 C516,560.653776 544.653776,532 580,532 Z M716,532 C751.346224,532 780,560.653776 780,596 C780,631.346224 751.346224,660 716,660 L692,660 C687.581722,660 684,656.418278 684,652 C684,647.581722 687.581722,644 692,644 L716,644 C742.509668,644 764,622.509668 764,596 C764,569.490332 742.509668,548 716,548 L692,548 C687.581722,548 684,544.418278 684,540 C684,535.581722 687.581722,532 692,532 L716,532 Z M468,532 C472.418278,532 476,535.581722 476,540 L476,652 C476,656.418278 472.418278,660 468,660 L444,660 C408.653776,660 380,631.346224 380,596 C380,560.653776 408.653776,532 444,532 L468,532 Z M332,532 C336.418278,532 340,535.581722 340,540 L340,652 C340,656.418278 336.418278,660 332,660 L252,660 C247.581722,660 244,656.418278 244,652 L244,540 C244,535.581722 247.581722,532 252,532 L332,532 Z M580,548 C553.490332,548 532,569.490332 532,596 C532,622.509668 553.490332,644 580,644 C606.509668,644 628,622.509668 628,596 C628,569.490332 606.509668,548 580,548 Z M461,548 L444,548 C417.490332,548 396,569.490332 396,596 C396,622.509668 417.490332,644 444,644 L461,644 L461,548 Z M444,364 C479.346224,364 508,392.653776 508,428 C508,463.346224 479.346224,492 444,492 C408.653776,492 380,463.346224 380,428 C380,392.653776 408.653776,364 444,364 Z M332,364 C336.418278,364 340,367.581722 340,372 C340,376.418278 336.418278,380 332,380 L308,380 C281.490332,380 260,401.490332 260,428 C260,454.509668 281.490332,476 308,476 L332,476 C336.418278,476 340,479.581722 340,484 C340,488.418278 336.418278,492 332,492 L308,492 C272.653776,492 244,463.346224 244,428 C244,392.653776 272.653776,364 308,364 L332,364 Z M580,364 C615.346224,364 644,392.653776 644,428 C644,463.346224 615.346224,492 580,492 L556,492 C551.581722,492 548,488.418278 548,484 L548,372 C548,367.581722 551.581722,364 556,364 L580,364 Z M772,364 C776.418278,364 780,367.581722 780,372 C780,376.418278 776.418278,380 772,380 L700,380 L700,420 L772,420 C776.418278,420 780,423.581722 780,428 C780,432.418278 776.418278,436 772,436 L700,436 L700,476 L772,476 C776.418278,476 780,479.581722 780,484 C780,488.418278 776.418278,492 772,492 L692,492 C687.581722,492 684,488.418278 684,484 L684,372 C684,367.581722 687.581722,364 692,364 L772,364 Z M444,380 C417.490332,380 396,401.490332 396,428 C396,454.509668 417.490332,476 444,476 C470.509668,476 492,454.509668 492,428 C492,401.490332 470.509668,380 444,380 Z M580,380 L563,380 L563,476 L580,476 C606.509668,476 628,454.509668 628,428 C628,401.490332 606.509668,380 580,380 Z"></path></g></svg></a></div><div id="-codedoc-container" class="container"><hr><p>created: 2024-08-01T14:11:11 (UTC +02:00)
tags: []
source: <a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/object.html">https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/object.html</a>
author: </p><hr><h1 id="object-repository--veeam-backup--replication-best-practice-guide" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Object Repository | Veeam Backup &amp; Replication Best Practice Guide</h1><hr><p>Starting from Veeam Backup &amp; Replication v12, a Object Storage Repository can be used as a simple repository, or both as a Performance Tier or a Capacity Tier in a <a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/scaleout.html">Scale-out Backup Repository</a>.</p><p>Users can freely decide to use any of the storage types based on multiple business parameters: being Veeam a software solution that can adapt itself to any situation, they can keep the existing Block Storage and maximize the storage estate (not just the machines, but also the related connectivity infrastructure, for example FC fabric) for its entire life cycle. When a hardware refresh is due, they can keep using block storage - if they are more confident with this type of storage - or evaluate a progressive switch to Object storage, or a mix of both depending on the business requirements.</p><h2 id="on-premises-vs-hosted" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/object.html#on-premises-vs-hosted"></a>On-premises vs hosted</h2><p>The biggest choice when considering Object Storage is to either go for an on-premises (on-prem is short) solution or a hosted one.</p><ul><li><p>if the goal is to host primary backup jobs, we strongly recommend choosing an on-prem solution. The same latency and performance considerations apply here as with a block storage solution, so the object storage must also be as close as possible to the production environment;</p></li><li><p>for the Capacity Tier of a SOBR, or for backup copy jobs, users can choose again an on-prem solution, or to pay for a hosted solution. Some considerations for the latter:</p><ul><li>Throttling: many hosted solutions apply limits to both IOPS and API calls per seconds. For this reason, having a single large bucket is not a correct choice. Better to have many smaller buckets, so to distribute the load and increase the overall performance (as that will be the sum of all the limits).</li><li>Costs: consuming a public Object Storage is done via a price per month, calculated for both API calls and used space:<ul><li>putting and modifying data in object storage requires API calls like PUT, COPY or LIST. These calls have a possible price per call (depending on the chosen storage provider), and even if the cost of a single call is almost zero, thousands of calls make up for a value that has to be considered;</li><li>for data at rest, the used resources are normally priced by GB/month;</li><li>Enabling immutability on a given bucket is a choice we heavily recommend, but it comes with an additional cost, since retention becomes longer, and such the amount of storage GB’s per months.</li></ul></li><li>Bandwidth for restores: many public solutions offer free uploads, that is the bandwidth consumed for backups. But for restores, download bandwidth is heavily consumed, and that is usually paid. Egress traffic cost from the cloud data center can become significant depending on how much data is required to be pulled. Veeam tries to leverage the available data blocks in the Performance Tier to reduce costs, but blocks which are not present have to be downloaded by requesting the related objects.</li></ul></li></ul><h2 id="sizing-considerations" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/object.html#sizing-considerations"></a>Sizing considerations</h2><p>Due to the different technology, we cannot use the same concepts that come from the experience with Block Storage, like for example the ratio between CPU/Memory and the available storage space. For this reason, especially for on-prem solutions, we suggest to get in touch with your vendor/partner and let them know that you want to store Veeam backups to have the right sizing. Veeam backups put a high load on Object storage, so a proper design is required.</p><p>Be careful especially about the size of a bucket, and when possible prefer to use multiple smaller buckets. For primary backups we found so far that a bucket size of around 250 TB is a good choice, for multiple reasons:</p><ul><li>amount of stored objects (and thus metadata)</li><li>amount of API calls</li><li>throughput</li></ul><p>Some hyperscalers enable throttling on these values, so using multiple buckets can be seen as a scale-out solution to circumvent these limits, as Veeam can leverage the sum of the above mentioned limits. For example, if we need to have 500 TB of space, and a bucket is limited to 1000 ops/seconds, but using two buckets with 250TB each we can have 2000 ops/seconds, thus doubling the performance. Be sure to check with your vendor/partner to control which limits exist (if any).</p><h2 id="lifecycle-rules-and-tiering" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/object.html#lifecycle-rules-and-tiering"></a>Lifecycle rules and tiering</h2><p>Do <strong>not configure any tiering or lifecycle rules</strong> on object storage buckets used for Veeam Object Storage Repositories. They are <strong>unsupported</strong> as <a href="https://helpcenter.veeam.com/docs/backup/vsphere/object_storage_repository_cal.html#general-considerations-and-limitations">documented in the Help Center</a>.</p><p>Here is why:</p><ol><li>Tiering and lifecycle rules in object storages are based on object age. However, with Veeam’s implementation, even a very old object (which refers to a Veeam block) could still be relevant for the latest offloaded backup file when the block was not changed between the restore points. An object storage vendor can not know which blocks are still relevant and which are not and thus can not make proper tiering decisions.</li><li>The vendor APIs for the different storage products are not transparent. For example, accessing Amazon S3 or Amazon Glacier requires the use of different APIs. When tiering/lifecycle management is done on the object storage side, Veeam services are most likely not aware of that and cannot decide on how to access the tiered objects.</li></ol><hr><h3 id="references" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/object.html#references"></a>References</h3><ul><li><a href="https://www.veeam.com/alliance-partner-integrations-qualifications.html?type=object-storage-target">Alliance Partner Integrations &amp; Qualifications - Object Storage Target</a></li><li><a href="https://helpcenter.veeam.com/docs/backup/vsphere/object_storage_repository.html">Object Storage Repository</a></li></ul><hr><div class="contentnav-0-0-11" data-no-search=""><a href="#object-repository--veeam-backup--replication-best-practice-guide" class="h1" data-content-highlight="object-repository--veeam-backup--replication-best-practice-guide">Object Repository | Veeam Backup &amp; Replication Best Practice Guide</a><a href="#on-premises-vs-hosted" class="h2" data-content-highlight="on-premises-vs-hosted">On-premises vs hosted</a><a href="#sizing-considerations" class="h2" data-content-highlight="sizing-considerations">Sizing considerations</a><a href="#lifecycle-rules-and-tiering" class="h2" data-content-highlight="lifecycle-rules-and-tiering">Lifecycle rules and tiering</a><a href="#references" class="h3" data-content-highlight="references">References</a></div></div><div id="-codedoc-toc" class="toc-0-0-8"><div class="content-0-0-9"><div class="heading-0-0-3">Index</div><p><a href="/codedoc/">Home</a>
<a href="/codedoc/README">Index</a>
<a href="/codedoc/docs/Kostwein">Kostwein</a></p><div class="collapse-0-0-4 "><script id="RAiKbWLzkP">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("RAiKbWLzkP", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">PSModulesHelp</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/codedoc/docs/PSModulesHelp/ModuleDoku">PS Modules Help</a></p><hr></div></div><div class="collapse-0-0-4 "><script id="bgnRpujxdF">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("bgnRpujxdF", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">KnowledgeBase</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Knowledge/PowerShell/Index">PowerShell</a></p></blockquote></div></div><div class="collapse-0-0-4 "><script id="WaPFaLpFXb">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("WaPFaLpFXb", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Links</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Links/LinksWiki">Index</a></p></blockquote></div></div><div class="collapse-0-0-4 "><script id="ptVZxTkrAj">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("ptVZxTkrAj", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Veeam</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Knowledge/Veeam/Best%20Practices/index">Best Practices</a></p></blockquote></div></div><p><a href="/codedoc/docs/cheat-sheet">Markdown Cheat Sheet</a>
<a href="/codedoc/docs/code-features">Code Features</a></p><p><br><br></p><p>To add links to your other documents, simply
modify contents of <code>docs/md/_toc.md</code>.</p></div><div class="search-0-0-10"><script id="qeTmohOExU">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("qeTmohOExU", "EKtVWhWp+AfK3O64A4+bOg==", {"repo":"codedoc","user":"In-Pro-Org","root":"docs/md","pick":"\\.md$","drop":"(^_)|(\\/_)"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><div class="footer-0-0-7"><div class="left"><script id="xtnsseGyGj">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("xtnsseGyGj", "wCsMx1XMyC4jNi3FxvjU4g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div><div class="main"><div class="inside"><a href="https://github.com/In-Pro-Org/codedoc/" target="_blank">GitHub</a></div></div><div class="right"><script id="yivSsdOcSn">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("yivSsdOcSn", "6W59GcSTLBVXRr/Nl/rTkw==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><script id="RxTufCZcHd">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("RxTufCZcHd", "zKXJ5zf13oJGCwAAI3JIIA==", {"namespace":"/codedoc"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></body></html>
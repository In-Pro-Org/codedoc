<!DOCTYPE html><html><head><title>Codedoc</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/codedoc/docs/images/KostweinLogo.ico"><link href="https://fonts.googleapis.com/css?family=Roboto:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Roboto', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/codedoc/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/codedoc/docs/assets/codedoc-bundle.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"></head><body data-path="docs\Knowledge\Veeam\Best Practices\English\Dedup Appliances.md"><div class="header-0-0-12"><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><a class="github-button" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="false" data-show-count="true" data-size="false" href="https://github.com/In-Pro-Org/codedoc/">Star</a><br><br><a class="watermark-0-0-11" href="https://github.com/CONNECT-platform/codedoc" target="_blank">Created With<svg viewBox="0 0 536 296" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="codedoc" transform="translate(-244.000000, -364.000000)" fill-rule="nonzero"><path d="M580,532 C615.346224,532 644,560.653776 644,596 C644,631.346224 615.346224,660 580,660 C544.653776,660 516,631.346224 516,596 C516,560.653776 544.653776,532 580,532 Z M716,532 C751.346224,532 780,560.653776 780,596 C780,631.346224 751.346224,660 716,660 L692,660 C687.581722,660 684,656.418278 684,652 C684,647.581722 687.581722,644 692,644 L716,644 C742.509668,644 764,622.509668 764,596 C764,569.490332 742.509668,548 716,548 L692,548 C687.581722,548 684,544.418278 684,540 C684,535.581722 687.581722,532 692,532 L716,532 Z M468,532 C472.418278,532 476,535.581722 476,540 L476,652 C476,656.418278 472.418278,660 468,660 L444,660 C408.653776,660 380,631.346224 380,596 C380,560.653776 408.653776,532 444,532 L468,532 Z M332,532 C336.418278,532 340,535.581722 340,540 L340,652 C340,656.418278 336.418278,660 332,660 L252,660 C247.581722,660 244,656.418278 244,652 L244,540 C244,535.581722 247.581722,532 252,532 L332,532 Z M580,548 C553.490332,548 532,569.490332 532,596 C532,622.509668 553.490332,644 580,644 C606.509668,644 628,622.509668 628,596 C628,569.490332 606.509668,548 580,548 Z M461,548 L444,548 C417.490332,548 396,569.490332 396,596 C396,622.509668 417.490332,644 444,644 L461,644 L461,548 Z M444,364 C479.346224,364 508,392.653776 508,428 C508,463.346224 479.346224,492 444,492 C408.653776,492 380,463.346224 380,428 C380,392.653776 408.653776,364 444,364 Z M332,364 C336.418278,364 340,367.581722 340,372 C340,376.418278 336.418278,380 332,380 L308,380 C281.490332,380 260,401.490332 260,428 C260,454.509668 281.490332,476 308,476 L332,476 C336.418278,476 340,479.581722 340,484 C340,488.418278 336.418278,492 332,492 L308,492 C272.653776,492 244,463.346224 244,428 C244,392.653776 272.653776,364 308,364 L332,364 Z M580,364 C615.346224,364 644,392.653776 644,428 C644,463.346224 615.346224,492 580,492 L556,492 C551.581722,492 548,488.418278 548,484 L548,372 C548,367.581722 551.581722,364 556,364 L580,364 Z M772,364 C776.418278,364 780,367.581722 780,372 C780,376.418278 776.418278,380 772,380 L700,380 L700,420 L772,420 C776.418278,420 780,423.581722 780,428 C780,432.418278 776.418278,436 772,436 L700,436 L700,476 L772,476 C776.418278,476 780,479.581722 780,484 C780,488.418278 776.418278,492 772,492 L692,492 C687.581722,492 684,488.418278 684,484 L684,372 C684,367.581722 687.581722,364 692,364 L772,364 Z M444,380 C417.490332,380 396,401.490332 396,428 C396,454.509668 417.490332,476 444,476 C470.509668,476 492,454.509668 492,428 C492,401.490332 470.509668,380 444,380 Z M580,380 L563,380 L563,476 L580,476 C606.509668,476 628,454.509668 628,428 C628,401.490332 606.509668,380 580,380 Z"></path></g></svg></a></div><div id="-codedoc-container" class="container"><hr><p>created: 2024-08-01T14:11:11 (UTC +02:00)
tags: []
source: <a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html">https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html</a>
author: </p><hr><h1 id="dedup-appliances--veeam-backup--replication-best-practice-guide" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Dedup Appliances | Veeam Backup &amp; Replication Best Practice Guide</h1><hr><h2 id="deduplication-appliances" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#deduplication-appliances"></a>Deduplication appliances</h2><p>The main use cases of deduplication appliances are:</p><ul><li>reducing the storage consumed achieved by eliminating similar blocks of data</li><li>long-term storage of data.</li></ul><h2 id="considerations" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#considerations"></a>Considerations</h2><p>Any choice or decision can have a significant impact on the design. Therefore, when considering the use of such appliance, we must ask the following questions and consider what is the most important to our given situation:</p><ul><li>What are the RPO/RTO requirements?</li><li>Which (restore) features will be leveraged?</li><li>Is (backup file) encryption required?</li><li>Will there be secondary backup copies to another backup repository or tape?</li></ul><h3 id="rporto" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#rporto"></a>RPO/RTO</h3><p>These appliances are optimized for write operations, therefore will work great for ingesting lots of backup data. However, random read I/O suffers from the re-hydration processes required during restores (except appliances with a landing zone).</p><p>For this reason we recommend using inline deduplication appliances mainly as secondary targets, where parameters such as price per GB are more important than restore performance.</p><h3 id="required-restore-capabilities" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#required-restore-capabilities"></a>Required (restore) capabilities</h3><p>As mentioned above, with a deduplication appliance RTO is significantly impacted thus impacting the way certain (restore) capabilities will be experienced - unless the deduplication appliance offers a fast non-deduplicated area for the most recent restore points. Therefore it is important to qualify the main requirements when it comes to restore.</p><p>For example:</p><ul><li><p><strong>High-priority restores.</strong> You need to urgently migitate a ransomware attack, frequently perform automated restore tests, frequently spin up test environments from your backups, restore large databases or files, be able to restore application items very fast.<br>In this case, it is highly recommended to use a non-deduplicated backup repository (such as a landing zone) to be able to meet the required SLA.</p></li><li><p><strong>Low-priority restores.</strong> You need to restore an entire non-critical VM, restore few files or items from an application not more than once a week. In this case, the restore time is accepted and will therefore meet the SLA.</p></li></ul><h3 id="encryption" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#encryption"></a>Encryption</h3><p>VBR supports the encryption of backup files at-rest. This is useful when we try to protect ourselves from backup data theft. However, when writing encrypted backup files to a deduplication appliance, the deduplication efficiency is negatively impacted as two identical blocks will be different after encryption. This results in less reduction of storage consumption and turns the deduplication appliance into a very expensive backup repository.</p><p>In this case you can better turn off the backup file encryption option and switch on data encryption on the deduplication appliance itself. This will make sure all data on the storage device is encrypted, but it will only protect against the theft of the physical device itself.</p><h3 id="secondary-copies" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#secondary-copies"></a>Secondary copies</h3><p>When considering 3-2-1 into the design, it also means we will need to read data from the primary backup repository and copy (or move) it to a secondary backup repository or even tape. This operation puts extra load on the primary backup repository.</p><p>As described earlier, random read I/O suffers from the re-hydration processes which means that if a deduplication device is used as a primary backup repository, the performance of creating secondary copies of your backup data will be severely impaired.</p><h2 id="veeam-backup--replication-vbr" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#veeam-backup--replication-vbr"></a>Veeam Backup &amp; Replication (VBR)</h2><p>VBR is a storage-agnostic solution that can use any deduplication appliance as a backup repository. The following use cases are supported:</p><ul><li>Primary Backup Repository <strong>(not recommended)</strong></li><li>Secondary Backup Repository</li><li>Virtual Tape Library (VTL)</li></ul><h3 id="integrated-vs-non-integrated" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#integrated-vs-non-integrated"></a>Integrated vs non-integrated</h3><p>In general there are two types of deduplication appliances:</p><ul><li><p><strong>Integrated.</strong> This type is preferred and uses specific protocols such as DDBoost (DataDomain) and Catalyst (StoreOnce) or they even integrate the Veeam Data Mover agent directly onto their appliance (like Exagrid or Quantum). In this case, VBR can communicate with the storage device and only send the unique blocks instead of all of the new or changed backup data.</p><p>Synthetic operations will be performed on the appliance itself, therefore they will require minimal additional time and lower the I/O. Using backup job default settings with (weekly) synthetic full backups will run fine.</p><p><em>Applies to using as primary and secondary backup repository.</em></p></li><li><p><strong>Non-integrated.</strong> This type uses standard protocols such as SMB or NFS. In this case, VBR cannot communicate with the storage device directly and sends all of the new or changed backup data resulting in a higher flow of data traffic.</p><p>Avoid synthetic operations and use <a href="https://helpcenter.veeam.com/docs/backup/vsphere/active_full_backup.html">Active Full Backups</a>. The downside is the need to transport the entire amount of backup data on a weekly or monthly basis. Therefore plan carefully as this can lead to a longer backup or copy window and issues like longer opened VM snapshots with longer VM snapshot commits when running primary backups.</p><p><em>Applies to using as primary and secondary backup repository.</em></p></li></ul><h3 id="use-as-virtual-tape-library-vtl" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#use-as-virtual-tape-library-vtl"></a>Use as Virtual Tape Library (VTL)</h3><p>Using a deduplication appliance as VTL is not recommended given the considerations and limitations stated earlier:</p><ul><li>reduced deduplication benefits when storing encrypted backups</li><li>limited restore options</li><li>reduced performance</li></ul><p>Only use if there is a good reason such as the appliance already comes with a WORM VTL license.</p><h3 id="use-as-metadata-extents-for-nas-backups" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#use-as-metadata-extents-for-nas-backups"></a>Use as metadata extents for NAS backups</h3><p>For better performance for NAS backups, a fast (SSD) repository should be used for the metadata.<br>Please refer to the <a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/nasrepo.html#metadata-extents">NAS Backup Repository &gt; Metadata extents</a> section for more details.</p><hr><h2 id="references" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/deduplication.html#references"></a>References</h2><ul><li>Architectural guidelines for deduplication systems: <a href="https://www.veeam.com/kb2660">KB2660</a></li><li>Deduplication Appliance Best Practices: <a href="https://www.veeam.com/kb1745">KB1745</a></li><li>Veeam Alliance Partner integrations and qualifications: <a href="https://www.veeam.com/alliance-partner-integrations-qualifications.html?type=deduplication-target">Backup Target - Deduplication</a></li><li><a href="https://bp.veeam.com/vbr/2_Design_Structures/D_Veeam_Components/D_backup_repositories/nasrepo.html#nas-backup-repository">NAS Backup Repository Best Practices</a></li><li><a href="https://helpcenter.veeam.com/docs/backup/vsphere/backup_repository.html">Integrated Deduplicating storage appliances</a></li><li><a href="https://helpcenter.veeam.com/docs/backup/vsphere/sobr_extent_roles.html">Scale-Out Repository with Extents in Metadata and Data Roles</a></li><li><a href="https://helpcenter.veeam.com/docs/backup/vsphere/system_requirements.html#tape">Tape</a></li></ul><hr><div class="contentnav-0-0-17" data-no-search=""><a href="#dedup-appliances--veeam-backup--replication-best-practice-guide" class="h1" data-content-highlight="dedup-appliances--veeam-backup--replication-best-practice-guide">Dedup Appliances | Veeam Backup &amp; Replication Best Practice Guide</a><a href="#deduplication-appliances" class="h2" data-content-highlight="deduplication-appliances">Deduplication appliances</a><a href="#considerations" class="h2" data-content-highlight="considerations">Considerations</a><a href="#rporto" class="h3" data-content-highlight="rporto">RPO/RTO</a><a href="#required-restore-capabilities" class="h3" data-content-highlight="required-restore-capabilities">Required (restore) capabilities</a><a href="#encryption" class="h3" data-content-highlight="encryption">Encryption</a><a href="#secondary-copies" class="h3" data-content-highlight="secondary-copies">Secondary copies</a><a href="#veeam-backup--replication-vbr" class="h2" data-content-highlight="veeam-backup--replication-vbr">Veeam Backup &amp; Replication (VBR)</a><a href="#integrated-vs-non-integrated" class="h3" data-content-highlight="integrated-vs-non-integrated">Integrated vs non-integrated</a><a href="#use-as-virtual-tape-library-vtl" class="h3" data-content-highlight="use-as-virtual-tape-library-vtl">Use as Virtual Tape Library (VTL)</a><a href="#use-as-metadata-extents-for-nas-backups" class="h3" data-content-highlight="use-as-metadata-extents-for-nas-backups">Use as metadata extents for NAS backups</a><a href="#references" class="h2" data-content-highlight="references">References</a></div></div><div id="-codedoc-toc" class="toc-0-0-14"><div class="content-0-0-15"><div class="heading-0-0-9">Index</div><p><a href="/codedoc/">Home</a>
<a href="/codedoc/README">Index</a>
<a href="/codedoc/docs/Kostwein">Kostwein</a></p><div class="collapse-0-0-10 "><script id="QS_zaoNOsd">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("QS_zaoNOsd", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">PSModulesHelp</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/codedoc/docs/PSModulesHelp/ModuleDoku">PS Modules Help</a></p><hr></div></div><div class="collapse-0-0-10 "><script id="pxqWbyUEDx">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("pxqWbyUEDx", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">KnowledgeBase</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Knowledge/PowerShell/Index">PowerShell</a></p></blockquote></div></div><div class="collapse-0-0-10 "><script id="JadHVcfIZh">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("JadHVcfIZh", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Links</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Links/LinksWiki">Index</a></p></blockquote></div></div><div class="collapse-0-0-10 "><script id="waxvkRyFHB">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("waxvkRyFHB", "yAdNJkOJGbj52dvfV+HpdQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Veeam</span><span class="icon-font closed">chevron_right</span></div><div class="content"><blockquote><p><a href="/codedoc/docs/Knowledge/Veeam/Best%20Practices/index">Best Practices</a></p></blockquote></div></div><p><a href="/codedoc/docs/cheat-sheet">Markdown Cheat Sheet</a>
<a href="/codedoc/docs/code-features">Code Features</a></p><p><br><br></p><p>To add links to your other documents, simply
modify contents of <code>docs/md/_toc.md</code>.</p></div><div class="search-0-0-16"><script id="HfsufYHwYK">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("HfsufYHwYK", "EKtVWhWp+AfK3O64A4+bOg==", {"repo":"codedoc","user":"In-Pro-Org","root":"docs/md","pick":"\\.md$","drop":"(^_)|(\\/_)"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><div class="footer-0-0-13"><div class="left"><script id="QfKCHLiUyZ">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("QfKCHLiUyZ", "wCsMx1XMyC4jNi3FxvjU4g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div><div class="main"><div class="inside"><a href="https://github.com/In-Pro-Org/codedoc/" target="_blank">GitHub</a></div></div><div class="right"><script id="yFcNBDZrIO">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("yFcNBDZrIO", "6W59GcSTLBVXRr/Nl/rTkw==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><script id="yPEAloytjw">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("yPEAloytjw", "zKXJ5zf13oJGCwAAI3JIIA==", {"namespace":"/codedoc"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></body></html>